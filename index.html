<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>ุชุฌุฑุจุฉ 3</title>
    <link rel="stylesheet" href="./style.css">

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="ar">

<head>
  <meta charset="UTF-8">
  <title>Kids Quiz App</title>
  <link rel="stylesheet" href="style.css">
</head>

<!-- mammoth (docx -> text) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.14/mammoth.browser.min.js"></script>
<!-- pdf.js (ูู ุงุณุชุฎุฑุงุฌ ูุต ูู pdf) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.13.216/pdf.min.js"></script>
<!-- jsPDF (ูุฅูุดุงุก PDF ููุชุตุฏูุฑ) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- SheetJS (xlsx) ูู ุนุงูุฒ ุฅูุณู -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<body>

  <!-- ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู -->
  <div id="auth-screen" class="screen">
    <div class="auth-box" id="auth-box">
      <h1>๐ูููุณุฉ ูุงุฑุฌุฑุฌุณ ุจุณุจู ุงูุถุญุงู๐</h1>
      <input type="text" id="username" placeholder="ุงุณู ุงููุณุชุฎุฏู">
      <input type="password" id="password" placeholder="ูููุฉ ุงูุณุฑ">
      <button onclick="login()">๐ ุชุณุฌูู ุฏุฎูู</button>
      <span class="register-link" onclick="openRegister()">ููุณ ูุฏู ุญุณุงุจ</span>
    </div>
  </div>

  <!-- ุดุงุดุฉ ุฅูุดุงุก ุญุณุงุจ -->
  <div id="register-screen" class="screen hidden">
    <div class="auth-box" id="register-box">
      <h1>๐ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</h1>

      <div class="avatar-picker-wrap">
        <label>ุงุฎุชุฑ Avatar ุฃู ุงุฑูุน ุตูุฑุฉ (ุงุฎุชูุงุฑู)</label>
        <div class="avatar-picker" id="register-avatar-picker">
          <!-- ุตูุฑ Avatar ุณุชุญูู ุนุจุฑ CSS/JS (dicebear) -->
          <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=boy1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=boy1&size=64" alt="avatar1">
          <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=girl1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=girl1&size=64" alt="avatar2">
          <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=dog1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=dog1&size=64" alt="avatar3">
          <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=cat1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=cat1&size=64" alt="avatar4">
          <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=robot1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=robot1&size=64" alt="avatar5">
        </div>
        <input type="hidden" id="reg-avatar" value="">
      </div>

      <input type="text" id="reg-name" placeholder="๐ค ุงูุงุณู">
      <input type="text" id="reg-phone" placeholder="๐ฑ ุฑูู ุงููุญููู">
      <input type="date" id="reg-birth">
      <input type="file" id="reg-photo" accept="image/*">
      <input type="password" id="reg-pass" placeholder="๐ ูููุฉ ุงูุณุฑ">
      <input type="password" id="reg-pass2" placeholder="๐ ุชุฃููุฏ ูููุฉ ุงูุณุฑ">

      <select id="reg-stage">
        <option value="">-- ุงุฎุชุฑ ุงููุฑุญูุฉ --</option>
        <option value="ูุฑุญูุฉ ุงููู ูุชุงููุฉ">ูุฑุญูุฉ ุงููู ูุชุงููุฉ</option>
        <option value="ูุฑุญูุฉ ุซุงูุซุฉ ูุฑุงุจุนุฉ">ูุฑุญูุฉ ุซุงูุซุฉ ูุฑุงุจุนุฉ</option>
        <option value="ูุฑุญูุฉ ุฎุงูุณุฉ ูุณุงุฏุณุฉ">ูุฑุญูุฉ ุฎุงูุณุฉ ูุณุงุฏุณุฉ</option>
        <option value="ูุฑุญูุฉ ุฅุนุฏุงุฏู ูุซุงููู">ูุฑุญูุฉ ุฅุนุฏุงุฏู ูุซุงููู</option>
        <option value="ูุฑุญูุฉ ุงูุฑุงุนู ุงูุตุงูุญ">ูุฑุญูุฉ ุงูุฑุงุนู ุงูุตุงูุญ</option>
      </select>

      <div class="row">
        <button onclick="register()">โ ุฅูุดุงุก ุงูุญุณุงุจ</button>
        <button onclick="backToLogin()">โฉ๏ธ ุฑุฌูุน</button>
      </div>
    </div>
  </div>
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- ุดุงุดุฉ ุงููุณุชุฎุฏู ุงูุฑุฆูุณูุฉ -->
  <div id="user-home" class="screen hidden">
    <aside class="sidebar" id="main-sidebar">
      <img id="user-photo" class="profile-pic" src="" alt="ุตูุฑุฉ">
      <div id="user-coins" class="coins-display">๐ฐ 0</div>

      <h3 id="user-name"></h3>

      <div id="badges" class="badges-panel" aria-hidden="false" title="ุดุงุฑุงุชู"></div>

      <button class="side-btn" onclick="openProfile()"><span class="icon">๐ค</span> ุญุณุงุจู</button>
      <button class="side-btn" onclick="openMyResults()"><span class="icon">๐</span> ูุชุงุฆุฌู</button>
      <button class="side-btn" onclick="showUserShop()">๐ ุงููุชุฌุฑ</button>

      <button class="side-btn" onclick="logout()"><span class="icon">๐ช</span> ุชุณุฌูู ุฎุฑูุฌ</button>
    </aside>

    <main class="content">
      <h2 id="stage-title"></h2>
      <p id="stage-details"></p>
      <button onclick="startQuiz()">๐ ุฌุงูุฒ ููุจุฏุก</button>
    </main>
  </div>

  <!-- ุดุงุดุฉ ุญุณุงุจู -->
  <div id="profile-screen" class="screen hidden">
    <div class="auth-box" id="profile-box">
      <h1>๐ค ุญุณุงุจู</h1>
      <img id="profile-current-photo" class="profile-pic" src="" alt="ุงูุตูุฑุฉ">
      <div class="avatar-picker" id="profile-avatar-picker">

        <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=boy1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=boy1&size=64" alt="avatar1">
        <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=girl1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=girl1&size=64" alt="avatar2">
        <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=dog1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=dog1&size=64" alt="avatar3">
        <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=cat1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=cat1&size=64" alt="avatar4">
        <img class="avatar-option" data-url="https://api.dicebear.com/6.x/adventurer/png?seed=robot1&size=128" src="https://api.dicebear.com/6.x/adventurer/png?seed=robot1&size=64" alt="avatar5">
      </div>
      <input type="file" id="profile-photo" accept="image/*">
      <input type="text" id="profile-phone" placeholder="๐ฑ ุฑูู ุงููุญููู">
      <input type="date" id="profile-birth"placeholder="ุชุงุฑูุฎ ุงููููุงุฏ">
      <div class="row">
        <button onclick="saveProfile()">๐พ ุญูุธ ุงูุชุนุฏููุงุช</button>
        <button onclick="backToHome()">โฉ๏ธ ุฑุฌูุน</button>
      </div>
    </div>
  </div>

  <!-- ุดุงุดุฉ ุงูุฃุณุฆูุฉ -->
  <div id="quiz-screen" class="screen hidden">
    <div class="row-between">
      <div id="timer">โณ 00:00</div>
      <div id="score-counter">ุงูููุงุท: 0</div>
    </div>
    <h2 id="question-text"></h2>
    <div id="options" class="options-grid"></div>
  </div>

  <!-- ุดุงุดุฉ ุงููุชูุฌุฉ -->
  <div id="result-screen" class="screen hidden">
    <h2>๐ฏ ูุชูุฌุชู ๐ฏ</h2>
    <p id="score-text"></p>
    <p id="badge" class="badge"></p>
    <div id="review"></div>
    <button onclick="backToHome()">๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</button>
  </div>

  <!-------------------------- ุดุงุดุฉ ุงููุชุงุฆุฌ ุงูุณุงุจูุฉ ------------------------------->
  <div id="my-results-screen" class="screen hidden">
    <h2>๐ ูุชุงุฆุฌู</h2>
    <table id="myResultsTable">
      <thead>
        <tr>
          <th>๐ ุงูุชุงุฑูุฎ</th>
          <th>๐ ุงูุฏุฑุฌุฉ</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <button onclick="backToHome()">โฉ๏ธ ุฑุฌูุน</button>
  </div>
  <!-------------------------- ุดุงุดุฉ ุงููุชุฌุฑ ------------------------------->

  <div id="user-shop-screen" class="screen hidden">
    <h2>๐ ูุชุฌุฑ ุงูุฃูุงุชุงุฑุงุช</h2>
    <div id="user-shop-items" class="shop-items"></div>
    <button onclick="backToHome()">โฌ๏ธ ุฑุฌูุน</button>
  </div>

  <!-- ุฃุตูุงุช -->
  <audio id="correctSound" src="https://www.soundjay.com/human/applause-8.mp3"></audio>
  <audio id="wrongSound" src="https://www.soundjay.com/human/fart-squeak-01.mp3"></audio>
  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- ุดุงุดุฉ Sub Admin -->
  <div id="subadmin-home" class="screen hidden">
    <h1> <span id="subadmin-stage"></span></h1>

    <section id="subadmin-controls">
      <h3>ุฅุนุฏุงุฏุงุช ุงููุฑุญูุฉ</h3>
      <label>ูุญุงููุงุช ููููุฉ ููู ูุณุชุฎุฏู:
        <input id="cfg-attempts" type="number" min="0" value="0">
      </label>
      <label>ููุช ุจุฏุงูุฉ ุงูุงุฎุชุจุงุฑ:
        <input id="cfg-start" type="datetime-local">
      </label>
      <label>ููุช ููุงูุฉ ุงูุงุฎุชุจุงุฑ:
        <input id="cfg-end" type="datetime-local">
      </label>
      <label>ููุช ุงููุคูุช (ุจุงูุซูุงูู) - Override:
        <input id="cfg-timer" type="number" min="0" placeholder="ุงุชุฑู ูุงุฑุบ ูู ูุง ุชุบููุฑ">
      </label>
      <button onclick="saveStageConfig()">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช ุงููุฑุญูุฉ</button>
    </section>

    <hr>

    <section id="subadmin-upload">
      <h3>ุฑูุน ููู ุฃุณุฆูุฉ (json / txt / docx / pdf)</h3>
      <input id="questions-file" type="file" accept=".json,.txt,.docx,.pdf">
      <button onclick="uploadQuestions()">ุงุณุชุจุฏุงู ุงูุงุณุฆูุฉ</button>
      <div id="upload-log" style="margin-top:8px;color:#333;"></div>
    </section>

    <hr>

    <section id="subadmin-users" style="margin-top:16px;"></section>

    <hr>

    <section id="subadmin-results" style="margin-top:16px;"></section>

    <button onclick="logout()">โฌ๏ธ ุฑุฌูุน</button>
  </div>

  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <!-- ==================== ADMIN HOME ==================== -->
  <div id="admin-home" class="screen hidden">
    <h2 class="admin-title">ููุญุฉ ุชุญูู ุงููุดุฑู ุงูุนุงู</h2>

    <div class="panel admin-buttons">
      <button onclick="showAdminSection('manage-subadmins')">๐จโ๐ผ ุฅุฏุงุฑุฉ ุงููุดุฑููู ุงููุฑุนููู</button>
      <button onclick="showAdminSection('manage-stages')">๐ ุฅุฏุงุฑุฉ ุงููุฑุงุญู ูุงูุงุฎุชุจุงุฑุงุช</button>
      <button onclick="showAdminSection('manage-users')">๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</button>
      <button onclick="showAdminSection('manage-shop')">๐ ุงููุชุฌุฑ</button>
      <button onclick="logout()">๐ช ุชุณุฌูู ุงูุฎุฑูุฌ</button>
    </div>

    <!-- ุฃูุณุงู ูุงุจูุฉ ููุชุจุฏูู -->
    <div id="admin-sections">
      <!-- ======= Manage Subadmins (Admin) ======= -->
      <div id="manage-subadmins" class="admin-section hidden">
        <h3>๐ฅ ุฅุฏุงุฑุฉ ุงููุดุฑููู ุงููุฑุนููู</h3>
        <div id="subadmins-list">ุชุญููู...</div>

        <div id="subadmin-form-wrap">
          <h4>โ ุฅูุดุงุก / ุชุนุฏูู ูุดุฑู ูุฑุนู</h4>
          <input id="sub-name" placeholder="ุงุณู ุงููุณุชุฎุฏู (ูุซุงู: sub1)" />
          <input id="sub-pass" placeholder="ูููุฉ ุงูุณุฑ" />
          <select id="sub-stage">
            <option value="">-- ุงุฎุชุฑ ุงููุฑุญูุฉ --</option>
            <option value="ูุฑุญูุฉ ุงููู ูุชุงููุฉ">ูุฑุญูุฉ ุงููู ูุชุงููุฉ</option>
            <option value="ูุฑุญูุฉ ุซุงูุซุฉ ูุฑุงุจุนุฉ">ูุฑุญูุฉ ุซุงูุซุฉ ูุฑุงุจุนุฉ</option>
            <option value="ูุฑุญูุฉ ุฎุงูุณุฉ ูุณุงุฏุณุฉ">ูุฑุญูุฉ ุฎุงูุณุฉ ูุณุงุฏุณุฉ</option>
            <option value="ูุฑุญูุฉ ุฅุนุฏุงุฏู ูุซุงููู">ูุฑุญูุฉ ุฅุนุฏุงุฏู ูุซุงููู</option>
            <option value="ูุฑุญูุฉ ุงูุฑุงุนู ุงูุตุงูุญ">ูุฑุญูุฉ ุงูุฑุงุนู ุงูุตุงูุญ</option>
          </select>
          <div style="margin-top:8px;">
            <button onclick="createSubadmin()">ุญูุธ ูุดุฑู ุฌุฏูุฏ</button>
            <button onclick="clearSubadminForm()">ูุณุญ ุงูุญููู</button>
          </div>
        </div>
      </div>

      <div id="manage-stages" class="admin-section hidden">
        <h3>๐ ุฅุฏุงุฑุฉ ุงููุฑุงุญู</h3>
        <div id="admin-stage-list"></div>
        <div id="admin-stage-users" class="hidden panel">
          <h4 id="stage-users-title"></h4>
          <table>
            <thead>
              <tr>
                <th>๐ค ุงูุงุณู</th>
                <th>๐ฑ ุงูุชููููู</th>
                <th>๐ ุฃุนูู ูุชูุฌุฉ</th>
              </tr>
            </thead>
            <tbody id="stage-users-table"></tbody>
          </table>
          <button onclick="hideStageUsers()">โฌ๏ธ ุฑุฌูุน</button>
        </div>
      </div>

      <div id="manage-users" class="admin-section hidden">
        <h3>๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h3>
        <!-- ุฅุฏุงุฑุฉ ูุฑุญูุฉ (Admin ูุญุฐู/ูุนุฏู ุฅุนุฏุงุฏุงุช ุงููุดุฑู ุงููุฑุนู ุจููุณ BIN) -->
        <div id="admin-manage-stage" class="panel">
          <h3>โ๏ธ ุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงููุฑุญูุฉ (Admin)</h3>

          <label>ุงุฎุชุฑ ุงููุฑุญูุฉ:</label>
          <select id="admin-stage-picker" onchange="onAdminStagePicked()">
            <option value="">-- ุงุฎุชุฑ ุงููุฑุญูุฉ --</option>
            <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู ุจูุงุณุทุฉ fillAdminStagePicker() -->
          </select>

          <div id="admin-stage-settings" class="hidden" style="margin-top:12px;">
            <label>ูุญุงููุงุช ููููุฉ ููู ูุณุชุฎุฏู (0 = ุบูุฑ ูุญุฏูุฏ):</label>
            <input id="admin-max-attempts" type="number" min="0" value="0" style="width:140px">

            <label>ููุช ุงููุคูุช (ุจุงูุซูุงูู) โ ุงุชุฑู ูุงุฑุบุงู ูุงุณุชุฎุฏุงู ุงูุงูุชุฑุงุถู:</label>
            <input id="admin-timer" type="number" min="0" placeholder="ูุซุงู: 300">

            <label>ููุช ุจุฏุงูุฉ ุงูุงุฎุชุจุงุฑ:</label>
            <input id="admin-start-time" type="datetime-local">

            <label>ููุช ููุงูุฉ ุงูุงุฎุชุจุงุฑ:</label>
            <input id="admin-end-time" type="datetime-local">

            <div style="margin-top:10px;">
              <button onclick="saveStageSettingsForAdmin()">๐พ ุญูุธ ุฅุนุฏุงุฏุงุช</button>
              <button onclick="clearAdminStageSettings()">ูุณุญ ุงูุญููู</button>
            </div>

            <hr>

            <h4>๐ ุฑูุน ููู ุฃุณุฆูุฉ (ููุฎุฒู ูู ุจู ุงููุฑุญูุฉ)</h4>
            <input id="admin-questions-file" type="file" accept=".json,.txt,.pdf,.docx">
            <div style="margin-top:6px;">
              <button onclick="uploadQuestionsForAdmin()">โฌ๏ธ ุฑูุน (ูุชู ุงูุฅุถุงูุฉ)</button>
              <button onclick="replaceQuestionsForAdmin()">๐ ุงุณุชุจุฏุงู ุงูุฃุณุฆูุฉ ุจุงูููู</button>
            </div>
            <div id="admin-upload-log" style="margin-top:8px;color:#333"></div>
          </div>
        </div>

      </div>

      <div id="manage-shop" class="admin-section hidden">
        <h3>๐ ุฅุฏุงุฑุฉ ุงููุชุฌุฑ</h3>

        <div class="panel">
          <h4>โ ุฅุถุงูุฉ ุฃูุงุชุงุฑ ุฌุฏูุฏ</h4>
          <input id="avatar-url" placeholder="ุถุน ุฑุงุจุท ุตูุฑุฉ ุงูุฃูุงุชุงุฑ" />
          <input id="avatar-price" type="number" placeholder="ุณุนุฑ ุงูุฃูุงุชุงุฑ" />
          <button onclick="addAvatar()">ุญูุธ</button>
        </div>

        <h4>๐ ูุงุฆูุฉ ุงูุฃูุงุชุงุฑุงุช</h4>
        <div id="avatar-list"></div>
      </div>

    </div>

    <div id="admin-competitions" class="admin-section hidden">
      <h3>๐ ูุณุงุจูุงุช ุงููุดุฑู ุงูุนุงู</h3>
      <p>ููุง ููุฎูู ุงูุฃุฏููู ูุถูู ุงุฎุชุจุงุฑ ูุฎุตุต (ูุงุญููุง).</p>
    </div>
  </div>
  </div>

  <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
  <script src="script.js"></script>
</body>

</html>
    <script  src="./script.js"></script>

  </body>
  
</html>
